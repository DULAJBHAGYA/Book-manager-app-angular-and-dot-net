<div class="form-container">
  <div class="form-header">
    <button class="back-button" (click)="goBack()" title="Go back">
      <i class="fas fa-chevron-left"></i>
      <span>Back to Books</span>
    </button>
    <h2>Edit Book</h2>
  </div>
  
  <form (ngSubmit)="onSubmit()" #bookForm="ngForm" class="book-form" *ngIf="!isLoading">
    <div class="form-row">
      <div class="form-group">
        <label for="title">
          Title <span class="required">*</span>
        </label>
        <input 
          type="text" 
          id="title" 
          name="title" 
          [(ngModel)]="book.title" 
          required 
          placeholder="Enter book title"
          class="form-input">
      </div>
      
      <div class="form-group">
        <label for="author">
          Author <span class="required">*</span>
        </label>
        <input 
          type="text" 
          id="author" 
          name="author" 
          [(ngModel)]="book.author" 
          required 
          placeholder="Enter author name"
          class="form-input">
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="isbn">
          ISBN <span class="required">*</span>
        </label>
        <input 
          type="text" 
          id="isbn" 
          name="isbn" 
          [(ngModel)]="book.isbn" 
          required 
          placeholder="Enter ISBN number"
          class="form-input">
      </div>
      
      <div class="form-group">
        <label for="category">
          Category <span class="required">*</span>
        </label>
        <select 
          id="category" 
          name="category" 
          [(ngModel)]="book.category" 
          required 
          class="form-input">
          <option value="" disabled>Select category</option>
          <option value="Action">Action</option>
          <option value="Adventure">Adventure</option>
          <option value="Animation">Animation</option>
          <option value="Biography">Biography</option>
          <option value="Comedy">Comedy</option>
          <option value="Crime">Crime</option>
          <option value="Horror">Horror</option>
          <option value="Fantasy">Fantasy</option>
          <option value="History">History</option>
          <option value="Mystery">Mystery</option>
          <option value="Romance">Romance</option>
          <option value="Sci-fi">Sci-fi</option>
        </select>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="publisher">
          Publisher <span class="required">*</span>
        </label>
        <input 
          type="text" 
          id="publisher" 
          name="publisher" 
          [(ngModel)]="book.publisher" 
          required 
          placeholder="Enter publisher name"
          class="form-input">
      </div>
      
      <div class="form-group">
        <label for="publicationDate">
          Publication Date <span class="required">*</span>
        </label>
        <input 
          type="date" 
          id="publicationDate" 
          name="publicationDate" 
          [(ngModel)]="book.publicationDate" 
          required 
          class="form-input">
      </div>
    </div>

    <div class="form-group full-width">
      <label for="coverImageUrl">
        Cover Image URL
      </label>
      <input 
        type="url" 
        id="coverImageUrl" 
        name="coverImageUrl" 
        [(ngModel)]="book.coverImageUrl" 
        placeholder="Enter cover image URL"
        class="form-input">
    </div>

    <div class="form-group full-width">
      <label for="description">
        Description <span class="required">*</span>
      </label>
      <textarea 
        id="description" 
        name="description" 
        [(ngModel)]="book.description" 
        required 
        rows="4" 
        placeholder="Enter book description..."
        class="form-input textarea"></textarea>
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-cancel" (click)="goBack()">
        Cancel
      </button>
      <button type="submit" class="btn btn-submit" [disabled]="!bookForm.form.valid">
        Update Book
      </button>
    </div>
  </form>

  <div *ngIf="isLoading" class="loading-container">
    <div class="loading-spinner"></div>
    <p>Loading book details...</p>
  </div>
</div>

<div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
  <div class="modal-container" (click)="$event.stopPropagation()">
    <div class="modal-header" [ngClass]="{'success': modalType === 'success', 'error': modalType === 'error'}">
      <div class="modal-icon">
        <i *ngIf="modalType === 'success'" class="fas fa-check-circle"></i>
        <i *ngIf="modalType === 'error'" class="fas fa-exclamation-circle"></i>
      </div>
      <h3>{{ modalTitle }}</h3>
    </div>
    
    <div class="modal-body">
      <p>{{ modalMessage }}</p>
    </div>
    
    <div class="modal-actions">
      <button class="btn btn-primary" (click)="onModalOk()">
        OK
      </button>
    </div>
  </div>
</div>